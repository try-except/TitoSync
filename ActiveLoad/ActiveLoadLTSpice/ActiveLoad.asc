Version 4
SHEET 1 3760 1032
WIRE 2464 -176 2032 -176
WIRE 2816 -176 2816 -304
WIRE 2816 -176 2464 -176
WIRE 3216 -176 2816 -176
WIRE 3648 -176 3216 -176
WIRE 1776 -32 1520 -32
WIRE 2224 -32 1776 -32
WIRE 2608 -32 2224 -32
WIRE 3008 -32 2608 -32
WIRE 3440 -32 3008 -32
WIRE 0 0 0 -96
WIRE 224 16 224 -32
WIRE 992 16 880 16
WIRE 1248 16 1072 16
WIRE 2608 16 2608 -32
WIRE 3008 16 3008 -32
WIRE 3440 16 3440 -32
WIRE 512 32 512 -16
WIRE 1776 32 1776 -32
WIRE 2224 32 2224 -32
WIRE 704 48 544 48
WIRE 880 48 880 16
WIRE 880 48 704 48
WIRE 1248 48 1248 16
WIRE 1280 48 1248 48
WIRE 1408 48 1408 -32
WIRE 1408 48 1360 48
WIRE 400 64 288 64
WIRE 480 64 400 64
WIRE 624 80 544 80
WIRE 2032 80 2032 -176
WIRE 2464 80 2464 -176
WIRE 2816 80 2816 -176
WIRE 3216 80 3216 -176
WIRE 3648 80 3648 -176
WIRE 224 128 224 112
WIRE 224 128 80 128
WIRE 400 128 400 64
WIRE 880 128 880 48
WIRE 1248 128 1248 48
WIRE 1280 128 1248 128
WIRE 1408 128 1408 48
WIRE 1408 128 1360 128
WIRE 224 144 224 128
WIRE 512 144 512 96
WIRE 1776 144 1776 112
WIRE 1872 144 1776 144
WIRE 2224 144 2224 112
WIRE 2304 144 2224 144
WIRE 2608 144 2608 96
WIRE 2656 144 2608 144
WIRE 3008 144 3008 96
WIRE 3056 144 3008 144
WIRE 3440 144 3440 96
WIRE 3488 144 3440 144
WIRE 1248 208 1248 128
WIRE 1280 208 1248 208
WIRE 1408 208 1408 128
WIRE 1408 208 1360 208
WIRE 880 224 880 208
WIRE 880 224 800 224
WIRE 1248 224 1248 208
WIRE 224 256 224 224
WIRE 880 304 880 224
WIRE 880 304 800 304
WIRE 880 336 880 304
WIRE 0 352 0 288
WIRE 64 352 0 352
WIRE 208 352 64 352
WIRE 400 352 400 192
WIRE 400 352 288 352
WIRE 624 352 624 80
WIRE 624 352 400 352
WIRE 1248 352 1248 288
WIRE 1776 352 1776 144
WIRE 2224 352 2224 144
WIRE 2608 352 2608 144
WIRE 3008 352 3008 144
WIRE 3440 352 3440 144
WIRE 0 384 0 352
WIRE 2032 400 2032 256
WIRE 2032 400 1840 400
WIRE 2464 400 2464 256
WIRE 2464 400 2288 400
WIRE 2816 400 2816 256
WIRE 2816 400 2672 400
WIRE 3216 400 3216 256
WIRE 3216 400 3072 400
WIRE 3648 400 3648 256
WIRE 3648 400 3504 400
WIRE 3216 432 3216 400
WIRE 3216 432 3152 432
WIRE 880 448 880 416
WIRE 2032 448 2032 400
WIRE 2032 448 1984 448
WIRE 2080 448 2032 448
WIRE 2464 448 2464 400
WIRE 2464 448 2416 448
WIRE 3648 448 3648 400
WIRE 3648 448 3568 448
WIRE 2816 464 2816 400
WIRE 2816 464 2752 464
WIRE 3152 464 3152 432
WIRE 3216 464 3216 432
WIRE 3568 464 3568 448
WIRE 3648 464 3648 448
WIRE 2032 528 1984 528
WIRE 2080 528 2032 528
WIRE 2464 528 2416 528
WIRE 0 544 0 464
WIRE 2816 544 2752 544
WIRE 3152 560 3152 544
WIRE 3216 560 3216 544
WIRE 3216 560 3152 560
WIRE 3568 560 3568 544
WIRE 3648 560 3648 544
WIRE 3648 560 3568 560
WIRE 1776 624 1776 448
WIRE 1776 624 1600 624
WIRE 2224 624 2224 448
WIRE 2224 624 1776 624
WIRE 2608 624 2608 448
WIRE 2608 624 2224 624
WIRE 3008 624 3008 448
WIRE 3008 624 2608 624
WIRE 3440 624 3440 448
WIRE 3440 624 3008 624
WIRE 272 656 272 640
WIRE 1376 672 1376 624
WIRE 464 704 464 672
WIRE 736 704 656 704
WIRE 2032 704 2032 528
WIRE 2464 704 2464 528
WIRE 2464 704 2032 704
WIRE 2816 704 2816 544
WIRE 2816 704 2464 704
WIRE 3216 704 3216 560
WIRE 3216 704 2816 704
WIRE 3648 704 3648 560
WIRE 3648 704 3216 704
WIRE 656 736 656 704
WIRE 736 736 736 704
WIRE 1600 736 1600 624
WIRE 272 752 272 736
WIRE 272 752 176 752
WIRE 176 768 176 752
WIRE 272 768 272 752
WIRE 1376 784 1376 752
WIRE 1536 784 1376 784
WIRE 2816 784 2816 704
WIRE 464 816 464 784
WIRE 1376 816 1376 784
WIRE 1600 848 1600 832
WIRE 272 880 272 848
WIRE 1376 944 1376 880
WIRE 1584 944 1376 944
WIRE 1600 944 1600 928
WIRE 1600 944 1584 944
WIRE 1584 960 1584 944
FLAG 0 -96 SRC+
FLAG 880 448 0
FLAG 1376 624 vcc
FLAG 1584 960 0
FLAG 80 128 b
FLAG 1520 -32 b
FLAG 2816 -304 c
FLAG 0 0 c
FLAG 0 288 e
FLAG 2816 784 e
FLAG 1408 -32 vcc
FLAG 1248 352 0
FLAG 704 48 Vset
FLAG 64 352 Vshunt
FLAG 224 -32 vcc
FLAG 512 -16 -vss
FLAG 512 144 vcc
FLAG 0 544 SRC-
FLAG 176 768 0
FLAG 272 880 -vss
FLAG 272 640 vcc
FLAG 464 816 SRC-
FLAG 464 672 SRC+
FLAG 656 736 SRC-
FLAG 736 736 0
FLAG 224 256 -vss
SYMBOL res -16 368 R0
SYMATTR InstName Rshunt
SYMATTR Value 0.3357
SYMBOL res 304 336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 2.2k
SYMBOL cap 384 128 R0
SYMATTR InstName C1
SYMATTR Value 1n
SYMBOL res 864 320 R0
SYMATTR InstName R3
SYMATTR Value 360
SYMBOL res 1088 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 6.82k
SYMBOL npn 1536 736 R0
SYMATTR InstName Q1
SYMATTR Value 2N2222
SYMBOL diode 1360 816 R0
SYMATTR InstName D1
SYMATTR Value led1v8
SYMBOL res 1360 656 R0
SYMATTR InstName R2
SYMATTR Value 470
SYMBOL npn 1840 352 M0
SYMATTR InstName Q2
SYMATTR Value 2N2222
SYMBOL npn 2288 352 M0
SYMATTR InstName Q3
SYMATTR Value 2N2222
SYMBOL npn 2672 352 M0
SYMATTR InstName Q4
SYMATTR Value 2N2222
SYMBOL res 2448 432 R0
SYMATTR InstName R6
SYMATTR Value 0.5
SYMBOL res 2800 448 R0
SYMATTR InstName R7
SYMATTR Value 0.5
SYMBOL res 2592 0 R0
SYMATTR InstName R8
SYMATTR Value 220
SYMBOL res 2208 16 R0
SYMATTR InstName R9
SYMATTR Value 220
SYMBOL res 1760 16 R0
SYMATTR InstName R10
SYMATTR Value 220
SYMBOL res 1584 832 R0
SYMATTR InstName R11
SYMATTR Value 33
SYMBOL TIP142 1952 160 R0
WINDOW 3 109 109 Left 2
SYMATTR InstName U3
SYMBOL TIP142 2384 160 R0
WINDOW 3 102 115 Left 2
SYMATTR InstName U4
SYMBOL TIP142 2736 160 R0
WINDOW 3 104 116 Left 2
SYMATTR InstName U5
SYMBOL npn 3072 352 M0
SYMATTR InstName Q5
SYMATTR Value 2N2222
SYMBOL res 3200 448 R0
SYMATTR InstName R12
SYMATTR Value 0.5
SYMBOL res 2992 0 R0
SYMATTR InstName R13
SYMATTR Value 220
SYMBOL TIP142 3136 160 R0
WINDOW 3 104 116 Left 2
SYMATTR InstName U1
SYMBOL npn 3504 352 M0
SYMATTR InstName Q6
SYMATTR Value 2N2222
SYMBOL res 3632 448 R0
SYMATTR InstName R14
SYMATTR Value 0.5
SYMBOL res 3424 0 R0
SYMATTR InstName R15
SYMATTR Value 220
SYMBOL TIP142 3568 160 R0
WINDOW 3 104 116 Left 2
SYMATTR InstName U6
SYMBOL res 1376 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 470
SYMBOL zener 1264 288 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value BZX84C3V3
SYMBOL res 1376 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 470
SYMBOL res 1376 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 470
SYMBOL res 864 112 R0
WINDOW 0 -47 44 Left 2
WINDOW 3 -43 73 Left 2
SYMATTR InstName R19
SYMATTR Value 10k
SYMBOL res 784 208 R0
SYMATTR InstName R20
SYMATTR Value 0.01
SYMBOL lm358 512 128 R180
WINDOW 0 16 32 Left 2
WINDOW 38 14 101 Left 2
SYMATTR InstName U2
SYMBOL res 1968 432 R0
SYMATTR InstName R5
SYMATTR Value 0.5
SYMBOL res 2064 432 R0
SYMATTR InstName R21
SYMATTR Value 0.5
SYMBOL res 2400 432 R0
SYMATTR InstName 0.1
SYMATTR Value 0.5
SYMBOL res 2736 448 R0
SYMATTR InstName R23
SYMATTR Value 0.5
SYMBOL res 3136 448 R0
SYMATTR InstName R24
SYMATTR Value 0.5
SYMBOL res 3552 448 R0
SYMATTR InstName R25
SYMATTR Value 0.5
SYMBOL npn 288 16 M0
SYMATTR InstName Q7
SYMATTR Value 2N2222
SYMBOL res 208 128 R0
SYMATTR InstName R22
SYMATTR Value 100k
SYMBOL voltage 272 640 R0
SYMATTR InstName V1
SYMATTR Value 15
SYMBOL voltage 272 752 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 15
SYMBOL voltage 464 688 R0
SYMATTR InstName V3
SYMATTR Value 12
TEXT -304 -360 Left 2 !.tran 0 100m 10m
TEXT -312 -320 Left 2 !.model led1v8 d Vfwd=1.8 Ron=0.25 Epsilon=1
TEXT -312 -288 Left 2 !.MODEL BZX84C3V3 D(IS=1.636E-15 N=1.028 RS=.13 IKF=1 XTI=3 EG=1.11 CJO=283.5E-12 M=.2019 VJ=.3905 FC=.5 BV=3.366 IBV=64.77E-3 TBV1=-.46E-3 TT=57.71E-9 Vpk=3.3 mfg=Philips type=zener)
TEXT 904 152 Left 2 ;Esto representa \nun potenciómetro de 10k.\nSi R20 vale 10k entonces\nVset es mínimo
TEXT 1000 72 Left 2 ;39K para 5V, 6.8k para 12V
TEXT 1664 896 Left 2 ;33 para 12V, 2.2 para 5V
